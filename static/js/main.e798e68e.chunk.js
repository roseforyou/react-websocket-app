(this["webpackJsonpreact-websocket-app"]=this["webpackJsonpreact-websocket-app"]||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(8),c=a.n(i),o=(a(14),a(2)),l=a(3),r=a(6),d=a(4),u=a(1),h=a(5),g=(a(15),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(d.a)(t).call(this,e))).inputChange=a.inputChange.bind(Object(u.a)(a)),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"inputChange",value:function(e){this.props.onInputChange(e.target.value,this.props.label)}},{key:"render",value:function(){return s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},this.props.label,":"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",placeholder:this.props.placeholder,value:this.props.value,disabled:this.props.disabled||!1,onChange:this.inputChange})))}}]),t}(s.a.Component)),b=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(d.a)(t).call(this,e))).setMessage=a.setMessage.bind(Object(u.a)(a)),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"setMessage",value:function(){this.props.receiveMsg(this.props.value)}},{key:"render",value:function(){return s.a.createElement("div",{className:"control"},s.a.createElement("a",{className:"button quick-input ".concat(this.props.btnClass),onClick:this.setMessage},this.props.value))}}]),t}(s.a.Component),m=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(d.a)(t).call(this,e))).clickEvent=a.clickEvent.bind(Object(u.a)(a)),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"clickEvent",value:function(){this.props.disabled||this.props.action()}},{key:"render",value:function(){return this.btnClass=this.props.btnClass?" ".concat(this.props.btnClass):"",this.isLoading=this.props.isLoading?" is-loading":"",this.pointerEvent=this.props.isLoading?{pointerEvent:"none"}:{pointerEvent:"auto"},s.a.createElement("div",{className:"control"},s.a.createElement("a",{className:"button".concat(this.btnClass).concat(this.isLoading),disabled:this.props.disabled,onClick:this.clickEvent,style:this.pointerEvent},this.props.text))}}]),t}(s.a.Component),p=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(d.a)(t).call(this,e))).componentWillUnmount=function(){a.setState=function(e,t){}},a.inputChangeHandle=a.inputChangeHandle.bind(Object(u.a)(a)),a.receiveMsgHandle=a.receiveMsgHandle.bind(Object(u.a)(a)),a.connect=a.connect.bind(Object(u.a)(a)),a.disconnect=a.disconnect.bind(Object(u.a)(a)),a.componentDidMount=a.componentDidMount.bind(Object(u.a)(a)),a.clearLogs=a.clearLogs.bind(Object(u.a)(a)),a.socketHandle=a.socketHandle.bind(Object(u.a)(a)),a.sendMsg=a.sendMsg.bind(Object(u.a)(a)),a.addLog=a.addLog.bind(Object(u.a)(a)),a.ws=null,a.state={token:"",roomID:"",WSURL:"",message:"",logs:"",connectBtnDisabled:!0,disconnectBtnDisabled:!0,sendBtnDisabled:!0,connectIsLoading:!1,disconnectIsLoading:!1},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("wsToken")&&this.inputChangeHandle(localStorage.getItem("wsToken"),"Token"),localStorage.getItem("wsRoomID")&&this.inputChangeHandle(localStorage.getItem("wsRoomID"),"RoomID"),localStorage.getItem("wsWSURL")&&this.inputChangeHandle(localStorage.getItem("wsWSURL"),"WSURL")}},{key:"buttonsStatus",value:function(){this.state.disconnectBtnDisabled&&this.state.WSURL?this.setState({connectBtnDisabled:!1}):this.setState({connectBtnDisabled:!0})}},{key:"inputChangeHandle",value:function(e,t){var a=this;"Token"===t?this.setState({token:e},(function(){a.buttonsStatus(),localStorage.setItem("wsToken",a.state.token)})):"RoomID"===t?this.setState({roomID:e},(function(){a.buttonsStatus(),localStorage.setItem("wsRoomID",a.state.roomID)})):"Message"===t?this.setState({message:e,sendBtnDisabled:!(e&&!this.state.disconnectBtnDisabled)}):"WSURL"===t&&this.setState({WSURL:e},(function(){a.buttonsStatus(),localStorage.setItem("wsWSURL",a.state.WSURL)}))}},{key:"receiveMsgHandle",value:function(e){this.inputChangeHandle(e,"Message")}},{key:"socketHandle",value:function(){var e=this;this.ws.onopen=function(){e.sendMsg("I'm coming!"),e.setState({connectBtnDisabled:!0,disconnectBtnDisabled:!1,sendBtnDisabled:!1,connectIsLoading:!1})},this.ws.onclose=function(){e.addLog("DISCONNECTED"),e.setState({connectBtnDisabled:!1,disconnectBtnDisabled:!0,sendBtnDisabled:!0,disconnectIsLoading:!1})},this.ws.onmessage=function(t){e.addLog("Received: "+t.data)},this.ws.onerror=function(t){e.addLog("Error: "+t.data)}}},{key:"connect",value:function(){this.setState({connectIsLoading:!0}),this.ws=new WebSocket(this.state.WSURL),this.socketHandle()}},{key:"disconnect",value:function(){this.setState({disconnectIsLoading:!0}),this.ws.close()}},{key:"sendMsg",value:function(e){var t=e||this.state.message;t.trim()&&(this.ws.send(t),this.addLog("Emitted: ".concat(t)))}},{key:"addLog",value:function(e){this.setState({logs:"".concat(this.state.logs?"".concat(this.state.logs,"\r\n> ").concat(e):"> ".concat(e))})}},{key:"clearLogs",value:function(){this.setState({logs:"> Console cleared"})}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("section",{className:"hero"},s.a.createElement("div",{className:"hero-body"},s.a.createElement("div",{className:"container"},s.a.createElement("h1",{className:"title"},"WebSocket"),s.a.createElement("h2",{className:"subtitle"},"To test websocket!"),s.a.createElement(g,{label:"WSURL",placeholder:"WSURL",value:this.state.WSURL,onInputChange:this.inputChangeHandle}),s.a.createElement("div",{className:"field is-grouped"},s.a.createElement(m,{text:"Connect",disabled:this.state.connectBtnDisabled,isLoading:this.state.connectIsLoading,action:this.connect}),s.a.createElement(m,{text:"Disconnect",disabled:this.state.disconnectBtnDisabled,isLoading:this.state.disconnectIsLoading,action:this.disconnect})),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Quick Msg:"),s.a.createElement("div",{className:"field is-grouped is-grouped-multiline"},s.a.createElement(b,{btnClass:"is-link",value:"Are you online",receiveMsg:this.receiveMsgHandle}),s.a.createElement(b,{btnClass:"is-info",value:"Please open url",receiveMsg:this.receiveMsgHandle}),s.a.createElement(b,{btnClass:"is-success",value:"Please get page info",receiveMsg:this.receiveMsgHandle}))),s.a.createElement(g,{label:"Message",placeholder:"Message",value:this.state.message,onInputChange:this.inputChangeHandle}),s.a.createElement("div",{className:"field is-grouped"},s.a.createElement(m,{text:"Send",btnClass:"is-primary",disabled:this.state.sendBtnDisabled,action:this.sendMsg})),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Log:"),s.a.createElement("div",{className:"control"},s.a.createElement("textarea",{className:"textarea log is-info",rows:"10",readOnly:!0,value:this.state.logs}))),s.a.createElement("div",{className:"field is-grouped"},s.a.createElement(m,{text:"Clear log",disabled:!1,action:this.clearLogs}))))))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,a){e.exports=a(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.e798e68e.chunk.js.map